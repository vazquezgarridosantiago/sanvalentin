<!DOCTYPE html>
<html lang="es">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
   
<head>
    <meta charset="UTF-8">
    <title>Cuestionario</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<h1>Unas preguntitas ğŸ˜Œ</h1>

<form id="quiz">
    <p>1ï¸âƒ£ Â¿Quieres cenar en el restaurante Vinitus?</p>
    <label class="option">
        <input type="radio" name="p1" value="SÃ­" required> SÃ­
    </label><br>
    <label class="option">
        <input type="radio" name="p1" value="Otra" id="p1-otra"> Alguna sugerencia ğŸ˜Š:
        <input type="text" name="p1_text" id="p1_text" placeholder="Escribe tu respuesta" style="display:none;">
    </label>

    <p>2ï¸âƒ£ Â¿A que hora te gustarÃ­a cenar?</p>
    <label class="option"><input type="radio" name="p2" required> 21:00</label><br>
    <label class="option"><input type="radio" name="p2"> 21:30</label><br>
    <label class="option"><input type="radio" name="p2"> La que tu kiera wapo</label>

    <p>3ï¸âƒ£ Â¿Quieres "dormir" conmigo despuÃ©s de la cena ğŸ˜?</p>
    <label class="option"><input type="radio" name="p3" required> Si</label><br>
    <label class="option" id="nofake">
        <input type="radio" name="p3"> No
    </label>

    <br><br>
    <button type="submit">Enviar</button>
</form>

<script>
    // Bloquear opciÃ³n "No" en la tercera pregunta
    document.getElementById("nofake").addEventListener("click", function (e) {
        e.preventDefault();
        this.checked = false;
        alert("Esa opciÃ³n no estÃ¡ disponible ğŸ˜˜");
    });

    // Mostrar campo de texto si eligen "Otra" en la primera pregunta
    const p1OtraRadio = document.getElementById('p1-otra');
    const p1Text = document.getElementById('p1_text');
    const p1Radios = document.querySelectorAll('input[name="p1"]');

    p1Radios.forEach(radio => {
        radio.addEventListener('change', () => {
            if (p1OtraRadio.checked) {
                p1Text.style.display = 'inline-block';
                p1Text.required = true;
            } else {
                p1Text.style.display = 'none';
                p1Text.required = false;
            }
        });
    });
</script>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script type="text/javascript">
  emailjs.init("rekswt2IaSQDkuH8G"); // Pon tu User ID real

  document.getElementById('quiz').addEventListener('submit', function(event) {
      event.preventDefault();

      // Obtener respuesta de la primera pregunta correctamente
      var p1_radio = this.querySelector('input[name="p1"]:checked');
      var p1 = p1_radio.value === "Otra" ? this.querySelector('input[name="p1_text"]').value : p1_radio.value;

      // Obtener respuestas de la segunda y tercera pregunta
      var p2 = this.querySelector('input[name="p2"]:checked').nextSibling.textContent.trim();
      var p3 = this.querySelector('input[name="p3"]:checked').nextSibling.textContent.trim();

      var mensaje = `
      Respuesta 1: ${p1}
      Respuesta 2: ${p2}
      Respuesta 3: ${p3}
      `;

      // Enviar correo usando EmailJS
      emailjs.send('service_fv78nzg', 'template_6xuvxfb', { 
        message: mensaje,
        to_email: 'jpinosimon@gmail.com' 
      })
      .then(function() {
          alert('Respuestas enviadas correctamente!âœ¨');
          document.getElementById('quiz').reset();
          p1Text.style.display = 'none'; // ocultar cajetÃ­n despuÃ©s de enviar
      }, function(error) {
          alert('Error al enviar el correo: ' + JSON.stringify(error));
      });
  });
</script>
</body>
</html>
